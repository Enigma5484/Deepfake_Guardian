/* --- ADVANCED UI ANIMATIONS (Reversible) --- */

:root {
  --mouse-x: 0.5;
  --mouse-y: 0.5;
  --tilt-strength: 10deg;
}

/* 1. Global Perspective for 3D effects */
body {
  perspective: 1000px;
  overflow-x: hidden; /* Prevent scrollbar flickering from parallax */
}

/* 2. 3D Tilt Effect for Glass Cards */
.glass-card {
  transition: transform 0.1s ease-out, box-shadow 0.3s ease;
  transform-style: preserve-3d;
  /* subtle rotation based on mouse position relative to center */
  transform: 
    rotateX(calc((var(--mouse-y) - 0.5) * var(--tilt-strength) * -1)) 
    rotateY(calc((var(--mouse-x) - 0.5) * var(--tilt-strength)));
  will-change: transform;
}

.glass-card:hover {
  --tilt-strength: 15deg;
  box-shadow: 
    0 20px 50px -10px rgba(79, 70, 229, 0.3),
    0 0 20px rgba(79, 70, 229, 0.2); /* Glow */
}

/* 3. Staggered Entry Animations */
@keyframes slideUpSpring {
  0% { 
    opacity: 0; 
    transform: translateY(40px) scale(0.9); 
  }
  60% {
    opacity: 1;
    transform: translateY(-5px) scale(1.02);
  }
  100% { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
  }
}

.glass-input, .btn-primary, .upload-box, .btn-secondary, .btn-danger-outline {
  animation: slideUpSpring 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
}

/* Stagger delays */
.form-group:nth-child(1) { animation-delay: 0.1s; }
.form-group:nth-child(2) { animation-delay: 0.2s; }
.form-group:nth-child(3) { animation-delay: 0.3s; }
.btn-primary { animation-delay: 0.5s; }

/* 4. Glitch Effect for Title */
@keyframes glitchText {
  0% { text-shadow: 2px 0 var(--primary), -2px 0 #ff00c1; }
  25% { text-shadow: -2px 2px var(--primary), 1px -1px #ff00c1; }
  50% { text-shadow: 1px -2px var(--primary), -2px 2px #ff00c1; }
  75% { text-shadow: -1px 2px var(--primary), 1px -2px #ff00c1; }
  100% { text-shadow: 2px 0 var(--primary), -2px 0 #ff00c1; }
}

.brand-text h1:hover {
  animation: glitchText 0.3s infinite;
  cursor: default;
}

/* 5. Cyber Scanline overlay on uploading */
.upload-box.has-file::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(to bottom, transparent 50%, rgba(79, 70, 229, 0.1) 51%, transparent 51%);
  background-size: 100% 4px;
  animation: scanlines 0.5s linear infinite;
  pointer-events: none;
  opacity: 0.3;
}

@keyframes scanlines {
  0% { transform: translateY(0); }
  100% { transform: translateY(4px); }
}

/* 6. Floating Particles (Parallax) */
.parallax-layer {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none;
  z-index: -1;
}

.particle {
  position: absolute;
  border-radius: 50%;
  background: var(--primary);
  opacity: 0.1;
  filter: blur(2px);
  /* Movement driven by JS setting --mouse-x/y */
  transition: transform 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* Different depths move at different speeds */
.layer-back .particle {
  transform: translate(
    calc((var(--mouse-x) - 0.5) * -50px),
    calc((var(--mouse-y) - 0.5) * -50px)
  );
}

.layer-mid .particle {
  transform: translate(
    calc((var(--mouse-x) - 0.5) * -100px),
    calc((var(--mouse-y) - 0.5) * -100px)
  );
}

.layer-front .particle {
  transform: translate(
    calc((var(--mouse-x) - 0.5) * -200px),
    calc((var(--mouse-y) - 0.5) * -200px)
  );
}

/* Pulsing glow for key elements */
@keyframes pulseGlow {
  0% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(79, 70, 229, 0); }
  100% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0); }
}

.btn-primary:hover {
  animation: pulseGlow 1.5s infinite;
}
